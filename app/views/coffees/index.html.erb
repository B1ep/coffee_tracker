<div style="margin: 0; padding: 0; min-height: 100vh;">
  
  <!-- Brown Header - Full Width -->
  <div style="background-color: #8b6f47; width: 100%; padding: 80px 24px;">
    <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
      <!-- Admin Logout (Top Right - only shows when logged in) -->
      <% if admin_authenticated? %>
        <div style="position: absolute; top: 16px; right: 16px;">
          <%= button_to admin_logout_path, method: :delete, style: "background-color: #2d4a3e; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px;" do %>
            Logout (Admin)
          <% end %>
        </div>
      <% end %>

      <h1 style="color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; font-size: 96px; font-weight: 700; margin: 0 0 24px 0; letter-spacing: -2px;">
        COLIN'S COFFEE
      </h1>
      <h2 style="color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; font-size: 28px; font-weight: 300; margin: 0;">
        Brewing in Park Slope, Brooklyn
      </h2>
    </div>
  </div>

  <!-- Light Green Content - Full Width -->
  <div style="background-color: #a8c5a0; width: 100%; padding: 48px 24px; min-height: 100vh;">
    <div style="max-width: 900px; margin: 0 auto;">

      <!-- Sort Controls -->
      <div style="text-align: right; margin-bottom: 32px;">
        <div style="position: relative; display: inline-block;">
          <button id="sortByButton" type="button" style="background-color: #2d4a3e; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; text-transform: uppercase; letter-spacing: 1px; font-weight: 400;">
            Sort By ▼
          </button>
          <div id="sortDropdown" style="display: none; position: absolute; right: 0; top: 100%; margin-top: 8px; background-color: #f5f1e8; padding: 16px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 1000; min-width: 180px;">
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <%= link_to "Date Tried ↓", coffees_path(sort_by: 'date_tried', sort_order: 'desc'), style: "display: block; background-color: #{params[:sort_by] == 'date_tried' && params[:sort_order] == 'desc' ? '#2d4a3e' : '#8b6f47'}; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; text-align: center; white-space: nowrap;" %>

              <%= link_to "Date Tried ↑", coffees_path(sort_by: 'date_tried', sort_order: 'asc'), style: "display: block; background-color: #{params[:sort_by] == 'date_tried' && params[:sort_order] == 'asc' ? '#2d4a3e' : '#8b6f47'}; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; text-align: center; white-space: nowrap;" %>

              <%= link_to "Rating ↓", coffees_path(sort_by: 'rating', sort_order: 'desc'), style: "display: block; background-color: #{params[:sort_by] == 'rating' && params[:sort_order] == 'desc' ? '#2d4a3e' : '#8b6f47'}; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; text-align: center; white-space: nowrap;" %>

              <%= link_to "Rating ↑", coffees_path(sort_by: 'rating', sort_order: 'asc'), style: "display: block; background-color: #{params[:sort_by] == 'rating' && params[:sort_order] == 'asc' ? '#2d4a3e' : '#8b6f47'}; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-size: 14px; text-align: center; white-space: nowrap;" %>
            </div>
          </div>
        </div>
      </div>

      <script>
        (function() {
          const sortButton = document.getElementById('sortByButton');
          const dropdown = document.getElementById('sortDropdown');

          if (sortButton && dropdown) {
            sortButton.addEventListener('click', function(event) {
              event.stopPropagation();
              if (dropdown.style.display === 'none' || dropdown.style.display === '') {
                dropdown.style.display = 'block';
              } else {
                dropdown.style.display = 'none';
              }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
              if (!sortButton.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.style.display = 'none';
              }
            });
          }
        })();
      </script>

      <!-- Add New Coffee Button (Admin Only) -->
      <% if admin_authenticated? %>
        <div style="text-align: center; margin-bottom: 48px;">
          <%= link_to new_coffee_path, style: "display: inline-block; background-color: #2d4a3e; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; font-weight: 400; padding: 12px 32px; border-radius: 8px; text-decoration: none; transition: opacity 0.2s;" do %>
            + Add New Coffee
          <% end %>
        </div>
      <% end %>

      <!-- Empty State -->
      <% if @coffees.empty? %>
        <div style="text-align: center; padding: 80px 24px; background-color: #f5f1e8; border-radius: 16px;">
          <div style="font-size: 96px; margin-bottom: 24px; opacity: 0.3;">☕</div>
          <h3 style="color: #2d4a3e; font-family: Helvetica, Arial, sans-serif; font-size: 36px; font-weight: 300; margin: 0 0 16px 0;">
            No reviews yet
          </h3>
          <p style="color: #5a7c69; font-family: Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 300; margin: 0;">
            Start your coffee journey by adding your first review
          </p>
        </div>
      <% end %>

      <!-- Coffee Reviews - Vertical Stack -->
      <% @coffees.each do |coffee| %>
        <div style="background-color: #f5f1e8; border-radius: 16px; padding: 32px; margin-bottom: 48px; position: relative; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
          
          <!-- Edit Button (Top Right) - Admin Only -->
          <% if admin_authenticated? %>
            <div style="position: absolute; top: 16px; right: 16px;">
              <%= link_to edit_coffee_path(coffee), style: "display: inline-block; background-color: #5a7c69; color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-size: 14px;" do %>
                Edit
              <% end %>
            </div>
          <% end %>

          <!-- Image (Centered) -->
          <div style="text-align: center; margin-bottom: 24px;">
            <% if coffee.image.attached? %>
              <%= link_to coffee_path(coffee) do %>
                <%= image_tag coffee.image, style: "max-height: 400px; max-width: 100%; height: auto; width: auto; display: inline-block; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" %>
              <% end %>
            <% else %>
              <%= link_to coffee_path(coffee) do %>
                <div style="display: inline-flex; align-items: center; justify-content: center; width: 300px; height: 400px; background: linear-gradient(135deg, #5a7c69 0%, #2d4a3e 100%); border-radius: 12px;">
                  <span style="font-size: 96px; color: #f5f1e8; opacity: 0.4;">☕</span>
                </div>
              <% end %>
            <% end %>
          </div>

          <!-- Coffee Info (Centered) -->
          <div style="text-align: center;">
            <%= link_to coffee_path(coffee), style: "text-decoration: none;" do %>
              <h2 style="color: #2d4a3e; font-family: Helvetica, Arial, sans-serif; font-size: 36px; font-weight: 400; margin: 0 0 8px 0;">
                <%= coffee.name %>
              </h2>
              
              <p style="color: #5a7c69; font-family: Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 300; margin: 0 0 12px 0;">
                <%= coffee.roaster %>
              </p>
              
              <% if coffee.origin.present? %>
                <p style="color: #8b6f47; font-family: Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 300; margin: 0 0 16px 0;">
                  <%= coffee.origin %>
                </p>
              <% end %>
              
              <!-- Roast Level Bar -->
              <% if coffee.roast_level.present? %>
                <div style="margin: 0 auto 16px auto; max-width: 300px;">
                  <p style="color: #8b6f47; font-family: Helvetica, Arial, sans-serif; font-size: 11px; font-weight: 400; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 8px 0; text-align: center;">
                    <%= coffee.roast_level_text %> Roast
                  </p>
                  
                  <div style="position: relative; height: 8px; background: linear-gradient(to right, #f5deb3 0%, #d2b48c 25%, #8b6f47 50%, #654321 75%, #3e2723 100%); border-radius: 4px; box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);">
                    <% roast_value = coffee.roast_level.to_i %>
                    <div style="position: absolute; top: 50%; left: <%= ((roast_value - 1) / 9.0 * 100).round(1) %>%; transform: translate(-50%, -50%); width: 14px; height: 14px; background-color: #2d4a3e; border: 2px solid #f5f1e8; border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,0.3);"></div>
                  </div>
                </div>
              <% end %>
              
              <!-- Brief Description (Tasting Notes) -->
              <% if coffee.tasting_notes.present? %>
                <p style="color: #5a7c69; font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: 300; margin: 0 0 16px 0; line-height: 1.5; max-width: 600px; margin-left: auto; margin-right: auto;">
                  <%= coffee.tasting_notes %>
                </p>
              <% end %>
              
              <!-- Score Badge -->
              <div style="display: inline-flex; align-items: center; gap: 8px; background-color: #2d4a3e; padding: 8px 24px; border-radius: 9999px;">
                <span style="color: #f5f1e8; font-family: Helvetica, Arial, sans-serif; font-size: 28px; font-weight: 300;">
                  <%= coffee.rating %><span style="font-size: 18px; opacity: 0.7;">/10</span>
                </span>
              </div>
            <% end %>
          </div>

        </div>
      <% end %>

    </div>
  </div>

</div>
